!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}var t=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,e(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e){var n=e._util;n.elements=p(e.options),n.count=n.elements.length,n.destroyed&&(n.destroyed=!1,e.options.container&&y(e.options.container,function(e){m(e,"scroll",n.validateT)}),m(window,"resize",n.saveViewportOffsetT),m(window,"resize",n.validateT),m(window,"scroll",n.validateT)),t(e)}function t(e){for(var t=e._util,o=0;o<t.count;o++){var i=t.elements[o];(n(i,e.options)||f(i,e.options.successClass))&&(e.load(i),t.elements.splice(o,1),t.count--,o--)}0===t.count&&e.destroy()}function n(e,t){var n=e.getBoundingClientRect();if(t.container&&x){var i=e.closest(t.containerClass);if(i){var r=i.getBoundingClientRect();if(o(r,k)){var s=r.top-t.offset,a=r.right+t.offset,l=r.bottom+t.offset,c=r.left-t.offset;return o(n,{top:s>k.top?s:k.top,right:a<k.right?a:k.right,bottom:l<k.bottom?l:k.bottom,left:c>k.left?c:k.left})}return!1}}return o(n,k)}function o(e,t){return e.right>=t.left&&e.bottom>=t.top&&e.left<=t.right&&e.top<=t.bottom}function i(e,t,n){if(!f(e,n.successClass)&&(t||n.loadInvisible||e.offsetWidth>0&&e.offsetHeight>0)){var o=c(e,S)||c(e,n.src);if(o){var i=o.split(n.separator),l=i[b&&i.length>1?1:0],u=c(e,n.srcset),p=h(e,"img"),v=e.parentNode,w=v&&h(v,"picture");if(p||void 0===e.src){var k=new Image,x=function(){n.error&&n.error(e,"invalid"),d(e,n.errorClass),g(k,"error",x),g(k,"load",z)},z=function(){p?w||a(e,l,u):e.style.backgroundImage='url("'+l+'")',r(e,n),g(k,"load",z),g(k,"error",x)};w&&(k=e,y(v.getElementsByTagName("source"),function(e){s(e,T,n.srcset)})),m(k,"error",x),m(k,"load",z),a(k,l,u)}else e.src=l,r(e,n)}else h(e,"video")?(y(e.getElementsByTagName("source"),function(e){s(e,E,n.src)}),e.load(),r(e,n)):(n.error&&n.error(e,"missing"),d(e,n.errorClass))}}function r(e,t){d(e,t.successClass),t.success&&t.success(e),u(e,t.src),u(e,t.srcset),y(t.breakpoints,function(t){u(e,t.src)})}function s(e,t,n){var o=c(e,n);o&&(l(e,t,o),u(e,n))}function a(e,t,n){n&&l(e,T,n),e.src=t}function l(e,t,n){e.setAttribute(t,n)}function c(e,t){return e.getAttribute(t)}function u(e,t){e.removeAttribute(t)}function h(e,t){return e.nodeName.toLowerCase()===t}function f(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function d(e,t){f(e,t)||(e.className+=" "+t)}function p(e){for(var t=[],n=e.root.querySelectorAll(e.selector),o=n.length;o--;t.unshift(n[o]));return t}function v(e){k.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,k.right=(window.innerWidth||document.documentElement.clientWidth)+e}function m(e,t,n){e.attachEvent?e.attachEvent&&e.attachEvent("on"+t,n):e.addEventListener(t,n,{capture:!1,passive:!0})}function g(e,t,n){e.detachEvent?e.detachEvent&&e.detachEvent("on"+t,n):e.removeEventListener(t,n,{capture:!1,passive:!0})}function y(e,t){if(e&&t)for(var n=e.length,o=0;o<n&&!1!==t(e[o],o);o++);}function w(e,t,n){var o=0;return function(){var i=+new Date;i-o<t||(o=i,e.apply(n,arguments))}}var S,k,b,x,E="src",T="srcset";return function(n){if(!document.querySelectorAll){var o=document.createStyleSheet();document.querySelectorAll=function(e,t,n,i,r){for(r=document.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(","),n=e.length;n--;){for(o.addRule(e[n],"k:v"),i=r.length;i--;)r[i].currentStyle.k&&t.push(r[i]);o.removeRule(0)}return t}}var r=this,s=r._util={};s.elements=[],s.destroyed=!0,r.options=n||{},r.options.error=r.options.error||!1,r.options.offset=r.options.offset||100,r.options.root=r.options.root||document,r.options.success=r.options.success||!1,r.options.selector=r.options.selector||".b-lazy",r.options.separator=r.options.separator||"|",r.options.containerClass=r.options.container,r.options.container=!!r.options.containerClass&&document.querySelectorAll(r.options.containerClass),r.options.errorClass=r.options.errorClass||"b-error",r.options.breakpoints=r.options.breakpoints||!1,r.options.loadInvisible=r.options.loadInvisible||!1,r.options.successClass=r.options.successClass||"b-loaded",r.options.validateDelay=r.options.validateDelay||25,r.options.saveViewportOffsetDelay=r.options.saveViewportOffsetDelay||50,r.options.srcset=r.options.srcset||"data-srcset",r.options.src=S=r.options.src||"data-src",x=Element.prototype.closest,b=window.devicePixelRatio>1,k={},k.top=0-r.options.offset,k.left=0-r.options.offset,r.revalidate=function(){e(r)},r.load=function(e,t){var n=this.options;e&&void 0===e.length?i(e,t,n):y(e,function(e){i(e,t,n)})},r.destroy=function(){var e=r._util;r.options.container&&y(r.options.container,function(t){g(t,"scroll",e.validateT)}),g(window,"scroll",e.validateT),g(window,"resize",e.validateT),g(window,"resize",e.saveViewportOffsetT),e.count=0,e.elements.length=0,e.destroyed=!0},s.validateT=w(function(){t(r)},r.options.validateDelay,r),s.saveViewportOffsetT=w(function(){v(r.options.offset)},r.options.saveViewportOffsetDelay,r),v(r.options.offset),y(r.options.breakpoints,function(e){if(e.width>=window.screen.width)return S=e.src,!1}),setTimeout(function(){e(r)})}})})),n=e(function(e,t){!function(){var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.7.2",t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);this.events[e].splice(n,1),this.events[e].length||delete this.events[e]}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return t.utils.asString(e).toLowerCase()});var n=t.tokenizer.seperator||t.tokenizer.separator;return e.toString().trim().toLowerCase().split(n)},t.tokenizer.seperator=!1,t.tokenizer.separator=/[\s\-]+/,t.tokenizer.load=function(e){var t=this.registeredFunctions[e];if(!t)throw new Error("Cannot load un-registered function: "+e);return t},t.tokenizer.label="default",t.tokenizer.registeredFunctions={default:t.tokenizer},t.tokenizer.registerFunction=function(e,n){n in this.registeredFunctions&&t.utils.warn("Overwriting existing tokenizer: "+n),e.label=n,this.registeredFunctions[n]=e},t.Pipeline=function(){this._stack=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in this.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[e.label]=e},t.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var o=t.Pipeline.registeredFunctions[e];if(!o)throw new Error("Cannot load un-registered function: "+e);n.add(o)}),n},t.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var o=this._stack.indexOf(e);if(-1==o)throw new Error("Cannot find existingFn");o+=1,this._stack.splice(o,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var o=this._stack.indexOf(e);if(-1==o)throw new Error("Cannot find existingFn");this._stack.splice(o,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,o=this._stack.length,i=0;i<n;i++){for(var r=e[i],s=0;s<o&&(void 0!==(r=this._stack[s](r,i,e))&&""!==r);s++);void 0!==r&&""!==r&&t.push(r)}return t},t.Pipeline.prototype.reset=function(){this._stack=[]},t.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},t.Vector.Node=function(e,t,n){this.idx=e,this.val=t,this.next=n},t.Vector.prototype.insert=function(e,n){this._magnitude=void 0;var o=this.list;if(!o)return this.list=new t.Vector.Node(e,n,o),this.length++;if(e<o.idx)return this.list=new t.Vector.Node(e,n,o),this.length++;for(var i=o,r=o.next;void 0!=r;){if(e<r.idx)return i.next=new t.Vector.Node(e,n,r),this.length++;i=r,r=r.next}return i.next=new t.Vector.Node(e,n,r),this.length++},t.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=this.list,n=0;t;)e=t.val,n+=e*e,t=t.next;return this._magnitude=Math.sqrt(n)},t.Vector.prototype.dot=function(e){for(var t=this.list,n=e.list,o=0;t&&n;)t.idx<n.idx?t=t.next:t.idx>n.idx?n=n.next:(o+=t.val*n.val,t=t.next,n=n.next);return o},t.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},t.SortedSet=function(){this.length=0,this.elements=[]},t.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},t.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},t.SortedSet.prototype.toArray=function(){return this.elements.slice()},t.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},t.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},t.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,o=n-t,i=t+Math.floor(o/2),r=this.elements[i];o>1;){if(r===e)return i;r<e&&(t=i),r>e&&(n=i),o=n-t,i=t+Math.floor(o/2),r=this.elements[i]}return r===e?i:-1},t.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,o=n-t,i=t+Math.floor(o/2),r=this.elements[i];o>1;)r<e&&(t=i),r>e&&(n=i),o=n-t,i=t+Math.floor(o/2),r=this.elements[i];return r>e?i:r<e?i+1:void 0},t.SortedSet.prototype.intersect=function(e){for(var n=new t.SortedSet,o=0,i=0,r=this.length,s=e.length,a=this.elements,l=e.elements;;){if(o>r-1||i>s-1)break;a[o]!==l[i]?a[o]<l[i]?o++:a[o]>l[i]&&i++:(n.add(a[o]),o++,i++)}return n},t.SortedSet.prototype.clone=function(){var e=new t.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},t.SortedSet.prototype.union=function(e){var t,n,o;this.length>=e.length?(t=this,n=e):(t=e,n=this),o=t.clone();for(var i=0,r=n.toArray();i<r.length;i++)o.add(r[i]);return o},t.SortedSet.prototype.toJSON=function(){return this.toArray()},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.Store,this.tokenStore=new t.TokenStore,this.corpusTokens=new t.SortedSet,this.eventEmitter=new t.EventEmitter,this.tokenizerFn=t.tokenizer,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;return n._fields=e.fields,n._ref=e.ref,n.tokenizer(t.tokenizer.load(e.tokenizer)),n.documentStore=t.Store.load(e.documentStore),n.tokenStore=t.TokenStore.load(e.tokenStore),n.corpusTokens=t.SortedSet.load(e.corpusTokens),n.pipeline=t.Pipeline.load(e.pipeline),n},t.Index.prototype.field=function(e,t){var t=t||{},n={name:e,boost:t.boost||1};return this._fields.push(n),this},t.Index.prototype.ref=function(e){return this._ref=e,this},t.Index.prototype.tokenizer=function(e){return e.label&&e.label in t.tokenizer.registeredFunctions||t.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=e,this},t.Index.prototype.add=function(e,n){var o={},i=new t.SortedSet,r=e[this._ref],n=void 0===n||n;this._fields.forEach(function(t){var n=this.pipeline.run(this.tokenizerFn(e[t.name]));o[t.name]=n;for(var r=0;r<n.length;r++){var s=n[r];i.add(s),this.corpusTokens.add(s)}},this),this.documentStore.set(r,i);for(var s=0;s<i.length;s++){for(var a=i.elements[s],l=0,c=0;c<this._fields.length;c++){var u=this._fields[c],h=o[u.name],f=h.length;if(f){for(var d=0,p=0;p<f;p++)h[p]===a&&d++;l+=d/f*u.boost}}this.tokenStore.add(a,{ref:r,tf:l})}n&&this.eventEmitter.emit("add",e,this)},t.Index.prototype.remove=function(e,t){var n=e[this._ref],t=void 0===t||t;if(this.documentStore.has(n)){var o=this.documentStore.get(n);this.documentStore.remove(n),o.forEach(function(e){this.tokenStore.remove(e,n)},this),t&&this.eventEmitter.emit("remove",e,this)}},t.Index.prototype.update=function(e,t){var t=void 0===t||t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var n=this.tokenStore.count(e),o=1;return n>0&&(o=1+Math.log(this.documentStore.length/n)),this._idfCache[t]=o},t.Index.prototype.search=function(e){var n=this.pipeline.run(this.tokenizerFn(e)),o=new t.Vector,i=[],r=this._fields.reduce(function(e,t){return e+t.boost},0);return n.some(function(e){return this.tokenStore.has(e)},this)?(n.forEach(function(e,n,s){var a=1/s.length*this._fields.length*r,l=this,c=this.tokenStore.expand(e).reduce(function(n,i){var r=l.corpusTokens.indexOf(i),s=l.idf(i),c=1,u=new t.SortedSet;if(i!==e){var h=Math.max(3,i.length-e.length);c=1/Math.log(h)}r>-1&&o.insert(r,a*s*c);for(var f=l.tokenStore.get(i),d=Object.keys(f),p=d.length,v=0;v<p;v++)u.add(f[d[v]].ref);return n.union(u)},new t.SortedSet);i.push(c)},this),i.reduce(function(e,t){return e.intersect(t)}).map(function(e){return{ref:e,score:o.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})):[]},t.Index.prototype.documentVector=function(e){for(var n=this.documentStore.get(e),o=n.length,i=new t.Vector,r=0;r<o;r++){var s=n.elements[r],a=this.tokenStore.get(s)[e].tf,l=this.idf(s);i.insert(this.corpusTokens.indexOf(s),a*l)}return i},t.Index.prototype.toJSON=function(){return{version:t.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.Store=function(){this.store={},this.length=0},t.Store.load=function(e){var n=new this;return n.length=e.length,n.store=Object.keys(e.store).reduce(function(n,o){return n[o]=t.SortedSet.load(e.store[o]),n},{}),n},t.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},t.Store.prototype.get=function(e){return this.store[e]},t.Store.prototype.has=function(e){return e in this.store},t.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},t.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},t.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[aeiouy]",o="[^aeiou][^aeiouy]*",i=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),r=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),s=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),a=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),l=/^(.+?)(ss|i)es$/,c=/^(.+?)([^s])s$/,u=/^(.+?)eed$/,h=/^(.+?)(ed|ing)$/,f=/.$/,d=/(at|bl|iz)$/,p=new RegExp("([^aeiouylsz])\\1$"),v=new RegExp("^"+o+n+"[^aeiouwxy]$"),m=/^(.+?[^aeiou])y$/,g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,y=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,w=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,S=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,b=/ll$/,x=new RegExp("^"+o+n+"[^aeiouwxy]$");return function(n){var o,E,T,z,_,F,O;if(n.length<3)return n;if(T=n.substr(0,1),"y"==T&&(n=T.toUpperCase()+n.substr(1)),z=l,_=c,z.test(n)?n=n.replace(z,"$1$2"):_.test(n)&&(n=n.replace(_,"$1$2")),z=u,_=h,z.test(n)){var C=z.exec(n);z=i,z.test(C[1])&&(z=f,n=n.replace(z,""))}else if(_.test(n)){var C=_.exec(n);o=C[1],_=a,_.test(o)&&(n=o,_=d,F=p,O=v,_.test(n)?n+="e":F.test(n)?(z=f,n=n.replace(z,"")):O.test(n)&&(n+="e"))}if(z=m,z.test(n)){var C=z.exec(n);o=C[1],n=o+"i"}if(z=g,z.test(n)){var C=z.exec(n);o=C[1],E=C[2],z=i,z.test(o)&&(n=o+e[E])}if(z=y,z.test(n)){var C=z.exec(n);o=C[1],E=C[2],z=i,z.test(o)&&(n=o+t[E])}if(z=w,_=S,z.test(n)){var C=z.exec(n);o=C[1],z=r,z.test(o)&&(n=o)}else if(_.test(n)){var C=_.exec(n);o=C[1]+C[2],_=r,_.test(o)&&(n=o)}if(z=k,z.test(n)){var C=z.exec(n);o=C[1],z=r,_=s,F=x,(z.test(o)||_.test(o)&&!F.test(o))&&(n=o)}return z=b,_=r,z.test(n)&&_.test(n)&&(z=f,n=n.replace(z,"")),"y"==T&&(n=T.toLowerCase()+n.substr(1)),n}}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e]!==e)return e}},t.stopWordFilter=t.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.TokenStore=function(){this.root={docs:{}},this.length=0},t.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},t.TokenStore.prototype.add=function(e,t,n){var n=n||this.root,o=e.charAt(0),i=e.slice(1);return o in n||(n[o]={docs:{}}),0===i.length?(n[o].docs[t.ref]=t,void(this.length+=1)):this.add(i,t,n[o])},t.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e.charAt(n)])return!1;t=t[e.charAt(n)]}return!0},t.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,n=0;n<e.length;n++){if(!t[e.charAt(n)])return{};t=t[e.charAt(n)]}return t},t.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},t.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},t.TokenStore.prototype.remove=function(e,t){if(e){for(var n=this.root,o=0;o<e.length;o++){if(!(e.charAt(o)in n))return;n=n[e.charAt(o)]}delete n.docs[t]}},t.TokenStore.prototype.expand=function(e,t){var n=this.getNode(e),o=n.docs||{},t=t||[];return Object.keys(o).length&&t.push(e),Object.keys(n).forEach(function(n){"docs"!==n&&t.concat(this.expand(e+n,t))},this),t},t.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(t,n){e.exports=n()}(0,function(){return t})}()}),o=(document.querySelector(".searchform"),document.querySelector(".searchfield")),i=document.querySelector(".searchcontainer"),r=document.querySelector(".searchcount"),s=void 0,a=new t({breakpoints:[{width:420,src:"data-src-small"}],success:function(e){setTimeout(function(){var t=e.parentNode;t.className=t.className.replace(/\bloading\b/,"")},400)}}),l=n(function(){this.ref("id"),this.field("title",{boost:10}),this.field("artist"),this.field("link"),this.field("image"),this.field("content"),this.field("label"),this.field("tags")});for(var c in window.store)l.add({id:c,title:window.store[c].title,artist:window.store[c].artist,link:window.store[c].link,image:window.store[c].image,content:window.store[c].content,label:window.store[c].label,tags:window.store[c].tags});var u=function(e){window.history.pushState("","","?s="+encodeURIComponent(e))},h=function(e){var t=l.search(e);i.innerHTML="",r.innerHTML="Hittade "+t.length+" skivor",u(e),f(t)},f=function(e){clearTimeout(s),s=setTimeout(function(){var t=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var l=r.value,c=l.ref,u=document.createElement("div");u.className="searchitem",u.innerHTML="<div class='card'><a class='card-link' href='"+window.store[c].link+"'><div class='card-image'><div class='loading'><img class='b-lazy img-responsive' src='"+window.store[c].image+"' data-src='"+window.store[c].image+"' alt='"+window.store[c].title+"'/></div></div><div class='card-header'><h4 class='card-title'>"+window.store[c].artist+" - "+window.store[c].title+"</h4><h6 class='card-meta'>"+window.store[c].label+"</h6></div></a></div>",i.appendChild(u),setTimeout(function(){a.revalidate()},300)}}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}},300)};!function(){o.addEventListener("keyup",function(e){e.preventDefault();var t=this.value;h(t)})}(),function(){var e=document.createElement("a");if(e.href=window.location.href,e.href.includes("=")){var t=decodeURIComponent(e.href.substring(e.href.indexOf("=")+1));o.setAttribute("value",t),h(t)}}()});
